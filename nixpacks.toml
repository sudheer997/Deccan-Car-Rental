[phases.setup]
nixPkgs = ["nodejs", "yarn"]

[phases.install]
cmds = ["yarn install --frozen-lockfile"]

[phases.build]
cmds = [
  "echo '=== Building Next.js application ==='",
  "yarn build",
  "echo '=== Making start script executable ==='",
  "chmod +x start.sh",
  "echo '=== Build complete ==='"
]

[start]
cmd = "bash start.sh"
